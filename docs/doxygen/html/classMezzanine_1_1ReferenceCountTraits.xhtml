<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mezzanine::ReferenceCountTraits&lt; T &gt; Class Template Reference</title>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="DoxyStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;" nowrap="nowrap">
   <div id="projectname"><a href="http://blacktoppstudios.com"><img src="logogreen100pxtall.png"/></a>MezzanineEngine&#160;<span id="projectnumber">March 7, 2013</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.xhtml"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.xhtml"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.xhtml"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.xhtml"><span>Classes</span></a></li>
      <li><a href="files.xhtml"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.xhtml"><span>Class&#160;List</span></a></li>
      <li><a href="classes.xhtml"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.xhtml"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.xhtml"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceMezzanine.xhtml">Mezzanine</a></li><li class="navelem"><a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml">ReferenceCountTraits</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classMezzanine_1_1ReferenceCountTraits-members.xhtml">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Mezzanine::ReferenceCountTraits&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is used to deduce at compile if a specific class has built-in reference counting or needs an external reference count.  
 <a href="classMezzanine_1_1ReferenceCountTraits.xhtml#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="smartptr_8h_source.xhtml">smartptr.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:acb4e551ed5a21990263b9d949a647932"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>IsCastable</b> =  CastSimpleStatic
 }</td></tr>
<tr class="memdesc:acb4e551ed5a21990263b9d949a647932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to determine if the data a <a class="el" href="classMezzanine_1_1CountedPtr.xhtml" title="A simple reference counting pointer.">CountedPtr</a> is managing can be cast.  <a href="classMezzanine_1_1ReferenceCountTraits.xhtml#acb4e551ed5a21990263b9d949a647932">More...</a><br/></td></tr>
<tr class="memitem:adfc8ebcd691312a85db2e7dcf68a7d3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adfc8ebcd691312a85db2e7dcf68a7d3c"></a>
typedef <a class="el" href="classMezzanine_1_1ReferenceCount.xhtml">ReferenceCount</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml#adfc8ebcd691312a85db2e7dcf68a7d3c">ManagedType</a></td></tr>
<tr class="memdesc:adfc8ebcd691312a85db2e7dcf68a7d3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is type of the ReferenceCounter, The type of the class if reference counting is instrusive. <br/></td></tr>
<tr class="memitem:a779098f29cb18956f9f334d09ec1ad8b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a779098f29cb18956f9f334d09ec1ad8b"></a>
typedef <a class="el" href="classMezzanine_1_1ReferenceCount.xhtml">ReferenceCount</a>&lt; T &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml#a779098f29cb18956f9f334d09ec1ad8b">PtrType</a></td></tr>
<tr class="memdesc:a779098f29cb18956f9f334d09ec1ad8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the Pointer to the reference count, in case it is not ManageType*. <br/></td></tr>
<tr class="memitem:a7eb78cb291f0892607f32ff7d0fa1654"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7eb78cb291f0892607f32ff7d0fa1654"></a>
typedef T *&#160;</td><td class="memItemRight" valign="bottom"><b>TargetPtrType</b></td></tr>
<tr class="memitem:aa1e6a4c29ad8cff148821db32ff879fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1e6a4c29ad8cff148821db32ff879fa"></a>
typedef T&#160;</td><td class="memItemRight" valign="bottom"><b>TargetType</b></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a02ccb402d8c9e7e4417c154a8244eb95"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml#a779098f29cb18956f9f334d09ec1ad8b">PtrType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml#a02ccb402d8c9e7e4417c154a8244eb95">ConstructionPointer</a> (T *Target)</td></tr>
<tr class="memdesc:a02ccb402d8c9e7e4417c154a8244eb95"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will somehow return a pointer to the reference count.  <a href="#a02ccb402d8c9e7e4417c154a8244eb95"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br/>
class Mezzanine::ReferenceCountTraits&lt; T &gt;</h3>

<p>This is used to deduce at compile if a specific class has built-in reference counting or needs an external reference count. </p>
<p>Every class that does not implement its own reference count gets this default one. The Default reference count is not thread-safe, and requires that every dereferencing of the smart pointer has the cost of a double dereference. The double dereference is caused because the reference counter has to store a native pointer to the managed object. In benchmarks included with the Unit tests this seems to increase dereference time by about double. <br/>
 <br/>
 <a class="el" href="classMezzanine_1_1Any.xhtml" title="This is a simple class used for type-safe casting of any type of data.">Any</a> class that provides TypePointedTo* GetReferenceCountPointer(), Whole GetReferenceCount(), TypePointedTo&amp; GetReferenceCountReference(), Whole IncrementReferenceCount(), Whole DecrementReferenceCount() and void* GetMostDerived() (which need to be virtual if inheritance is used to be useful) can be used as a reference counter. If it provides these then a specialization of <a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml" title="This is used to deduce at compile if a specific class has built-in reference counting or needs an ext...">ReferenceCountTraits</a> should be implemented for a given class and <a class="el" href="classMezzanine_1_1CountedPtr.xhtml" title="A simple reference counting pointer.">CountedPtr</a> will use the type defined by <a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml#adfc8ebcd691312a85db2e7dcf68a7d3c" title="This is type of the ReferenceCounter, The type of the class if reference counting is instrusive...">ReferenceCountTraits&lt;T&gt;::ManagedType</a> as the counter. <br/>
 <br/>
 The <a class="el" href="namespaceMezzanine.xhtml" title="The bulk of the engine components go in this namspace.">Mezzanine</a> provides a Reference count class that can be used with any type at the cost of extra dereferences. Some types (Scripts) have their own internal reference count that when used will increase the locality (since the reference count is part of the managed object) and reduce dereferences to exactly one. Since the <a class="el" href="classMezzanine_1_1CountedPtr.xhtml" title="A simple reference counting pointer.">CountedPtr</a> is the size of a native pointer if it is used with an internal reference count, the only signifigant overhead should be the counting itself. </p>

<p>Definition at line <a class="el" href="smartptr_8h_source.xhtml#l00236">236</a> of file <a class="el" href="smartptr_8h_source.xhtml">smartptr.h</a>.</p>
</div><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="acb4e551ed5a21990263b9d949a647932"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to determine if the data a <a class="el" href="classMezzanine_1_1CountedPtr.xhtml" title="A simple reference counting pointer.">CountedPtr</a> is managing can be cast. </p>
<p>This uses the <a class="el" href="namespaceMezzanine.xhtml#ad937b4d169586b963a9545c39fe66739">CountedPointerCastingState</a> to enter a value the Template MetaProgramming Machinery will understand. </p>

<p>Definition at line <a class="el" href="smartptr_8h_source.xhtml#l00258">258</a> of file <a class="el" href="smartptr_8h_source.xhtml">smartptr.h</a>.</p>

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a02ccb402d8c9e7e4417c154a8244eb95"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml#a779098f29cb18956f9f334d09ec1ad8b">PtrType</a> <a class="el" href="classMezzanine_1_1ReferenceCountTraits.xhtml">Mezzanine::ReferenceCountTraits</a>&lt; T &gt;::ConstructionPointer </td>
          <td>(</td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>Target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This will somehow return a pointer to the reference count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Target</td><td>A pointer the freshly created object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This will return a pointer to a valid reference counter. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The default implemetation call new with a matching delete in CounterPtr::~CountedPtr . If no allocations are required this may simply return the passed parameter. </dd></dl>

<p>Definition at line <a class="el" href="smartptr_8h_source.xhtml#l00253">253</a> of file <a class="el" href="smartptr_8h_source.xhtml">smartptr.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/sqeaky/Code/Mezzanine/Mezzanine/src/<a class="el" href="smartptr_8h_source.xhtml">smartptr.h</a></li>
</ul>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 8 2013 23:33:49 for MezzanineEngine by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2</small></address>
</body>
</html>
